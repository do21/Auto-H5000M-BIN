# ImmortalWrt H5000M 额外配置文件
# 此文件包含所有软件包的配置逻辑
# 默认配置基于 workflow inputs 的默认值
# GitHub Actions workflow 会根据 inputs 覆盖相关配置

# ======== QModem 核心依赖 (不包含UI包) ========
# Core QModem dependencies (without UI packages)
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_qmodem=y

# QModem 依赖工具
CONFIG_PACKAGE_sms-tool_q=y
CONFIG_PACKAGE_ubus-at-daemon=y
CONFIG_PACKAGE_tom_modem=y

# QModem Vendor QMI 驱动
CONFIG_PACKAGE_kmod-qmi_wwan_q=y
CONFIG_PACKAGE_kmod-qmi_wwan_f=y
CONFIG_PACKAGE_kmod-qmi_wwan_s=y

# QModem Quectel CM 选择 - 使用 Tom 定制版
CONFIG_PACKAGE_quectel-CM-5G-M=y

# 其他核心包
CONFIG_PACKAGE_ndisc6=y
CONFIG_PACKAGE_mtkhqos_util=y

# ======== 常用软件 ========
# CONFIG_PACKAGE_luci-app-upnp=y
# CONFIG_PACKAGE_luci-app-vlmcsd=y
# CONFIG_PACKAGE_vlmcsd=y
# CONFIG_PACKAGE_smartdns=y
# CONFIG_PACKAGE_luci-app-smartdns=y
# CONFIG_PACKAGE_luci-app-smartdns-zh-cn=y
# CONFIG_PACKAGE_luci-app-ramfree=y
CONFIG_PACKAGE_luci-app-ramfree=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_yq=y
CONFIG_PACKAGE_firewall4=y
# kmod-nft-tproxy, ip-full, kmod-tun moved to conditional config for OpenClash

# ======== 可选插件配置 (根据 workflow inputs 启用) ========
# 注意: 这些是默认配置，GitHub Actions workflow 会根据用户输入进行覆盖
# 格式说明:
# - y = 启用包
# - 注释掉的行 = 默认禁用，可通过 workflow inputs 启用
# - # CONFIG_PACKAGE_xxx is not set = 强制禁用
# AdGuardHome - 默认启用
CONFIG_PACKAGE_luci-app-adguardhome=y
CONFIG_PACKAGE_adguardhome=y

# HomeProxy - 默认禁用 (可通过 workflow inputs 启用)
# CONFIG_PACKAGE_luci-app-homeproxy=y

# OpenClash - 默认启用
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-i18n-opkg-zh-cn=y
CONFIG_PACKAGE_luci-i18n-openclash-zh-cn=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_ip-full=y
CONFIG_PACKAGE_iptables-nft=y

# Mihomo - 默认禁用 (可通过 workflow inputs 启用)
# CONFIG_PACKAGE_luci-app-mihomo=y
# CONFIG_PACKAGE_mihomo=y

# UPnP - 默认启用
CONFIG_PACKAGE_luci-app-upnp=y

# VLMCSd - 默认启用
CONFIG_PACKAGE_luci-app-vlmcsd=y
CONFIG_PACKAGE_vlmcsd=y

# SmartDNS - 默认禁用 (可通过 workflow inputs 启用)
# CONFIG_PACKAGE_smartdns=y
# CONFIG_PACKAGE_luci-app-smartdns=y
# CONFIG_PACKAGE_luci-app-smartdns-zh-cn=y

# MosDNS - 默认启用
CONFIG_PACKAGE_luci-app-mosdns=y
CONFIG_PACKAGE_mosdns=y

# DockerMan - 默认禁用 (可通过 workflow inputs 启用)
# CONFIG_PACKAGE_luci-app-dockerman=y
# CONFIG_PACKAGE_docker=y
# CONFIG_PACKAGE_dockerd=y

# QModem Next - 默认启用 (与旧版QModem互斥)
CONFIG_PACKAGE_luci-app-qmodem-next=y

# QModem 旧版 - 默认禁用 (与新版QModem Next互斥)
# CONFIG_PACKAGE_luci-app-qmodem=y

# MWAN (多WAN负载均衡) - 默认启用
CONFIG_PACKAGE_luci-app-qmodem-mwan=y
CONFIG_PACKAGE_mwan3=y

# ======== LuCI 主题 ========
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y

# ======== MTK 硬件加速 ========
CONFIG_PACKAGE_luci-app-turboacc-mtk=y

# ======== 风扇控制 ========
CONFIG_PACKAGE_luci-app-Airpifanctrl=y

# ======== 取消默认勾选的包 ========
# 其他需要禁用的包
# CONFIG_PACKAGE_luci-app-wrtbwmon is not set
# CONFIG_PACKAGE_luci-app-rclone is not set
# CONFIG_PACKAGE_rclone is not set
# CONFIG_PACKAGE_rclone-ng is not set
# CONFIG_PACKAGE_rclone-webui-react is not set

# 旧版modem包，避免与QModem冲突
# CONFIG_PACKAGE_luci-app-modem is not set
# CONFIG_PACKAGE_luci-app-3ginfo-lite is not set
# CONFIG_PACKAGE_luci-app-sms-tool is not set

# 禁用旧版iptables，避免与nftables混用
# CONFIG_PACKAGE_iptables is not set
# CONFIG_PACKAGE_iptables-legacy is not set
# CONFIG_PACKAGE_iptables-mod-conntrack-extra is not set
# CONFIG_PACKAGE_iptables-mod-ipopt is not set
# CONFIG_PACKAGE_iptables-mod-ipsec is not set
# CONFIG_PACKAGE_iptables-mod-nat-extra is not set

# ======== 编译优化 ========
CONFIG_CCACHE=y
CONFIG_DEVEL=y
CONFIG_BUILD_LOG=y
CONFIG_KERNEL_BUILD_USER="builder"
CONFIG_KERNEL_BUILD_DOMAIN="github.actions"
